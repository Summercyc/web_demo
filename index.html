<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI圆桌 · 成长对话</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <!-- 使用本地Tailwind CSS文件，如果加载失败则回退到CDN -->
    <link rel="stylesheet" href="tailwind.min.css" onerror="this.onerror=null;this.href='https://cdn.tailwindcss.com';">
    
    <!-- 分享长图功能所需的外部库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" crossorigin="anonymous"></script>
    <script>
        // 安全配置 Tailwind CSS
        function configureTailwind() {
            if (typeof tailwind !== 'undefined' && tailwind.config) {
                try {
                    tailwind.config = {
                        theme: {
                            extend: {
                                colors: {
                                    'warm-blue': '#5A7CA8',
                                    'morning-orange': '#FF9A4D',
                                    'light-cream': '#FEFCF7'
                                }
                            }
                        }
                    };
                    console.log('Tailwind 配置已成功应用');
                } catch (error) {
                    console.warn('Tailwind 配置失败:', error);
                }
            }
        }

        // 检查是否需要加载Tailwind CDN
        document.addEventListener('DOMContentLoaded', function() {
            // 先尝试配置本地 Tailwind
            configureTailwind();
            
            // 检查样式是否生效
            setTimeout(function() {
                const style = getComputedStyle(document.body);
                if (style.backgroundColor !== 'rgb(254, 252, 247)') { // 检查light-cream背景色是否生效
                    const script = document.createElement('script');
                    script.src = 'https://cdn.tailwindcss.com';
                    script.onload = function() {
                        // Tailwind CDN 加载完成后配置
                        setTimeout(configureTailwind, 100);
                    };
                    document.head.appendChild(script);
                    console.log('已加载Tailwind CDN作为备用');
                }
            }, 100);
        });
    </script>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-light-cream font-sans">
    <div id="app" class="flex h-screen">
        <!-- 左侧导航栏 -->
        <div class="w-80 bg-white border-r border-gray-200 flex flex-col">
            <!-- 搜索框 -->
            <div class="p-4 border-b border-gray-100">
                <div class="relative">
                    <input type="text" id="searchInput" placeholder="🔍 搜索聊天记录..." 
                           class="w-full px-4 py-2 bg-gray-50 rounded-lg border-none outline-none focus:bg-white focus:ring-2 focus:ring-warm-blue/20">
                </div>
            </div>

            <!-- 新建圆桌按钮 -->
            <div class="p-4 border-b border-gray-100">
                <button id="newRoundtableBtn" class="w-full bg-morning-orange text-white py-2 px-4 rounded-lg hover:bg-orange-500 transition-colors duration-300">
                    + 新建AI圆桌
                </button>
            </div>

            <!-- 会话列表 -->
            <div class="flex-1 overflow-y-auto">
                <div id="sessionList" class="p-2">
                    <!-- 会话项将通过JS动态生成 -->
                </div>
            </div>

            <!-- 底部功能区 -->
            <div class="p-4 border-t border-gray-100 space-y-2">
                <button id="configBtn" class="w-full text-left px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors">
                    ⚙️ 配置中心
                </button>
                <button id="growthLogBtn" class="w-full text-left px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors">
                    📓 成长日志
                </button>
            </div>
        </div>

        <!-- 主聊天区域 -->
        <div class="flex-1 flex flex-col">
            <!-- AI角色栏 -->
            <div id="aiRoleBar" class="bg-white border-b border-gray-200 p-4">
                <div class="flex space-x-4" id="aiRoles">
                    <!-- AI角色头像将通过JS动态生成 -->
                </div>
            </div>

            <!-- 聊天消息区 -->
            <div class="flex-1 overflow-y-auto p-6" id="chatMessages">
                <div class="max-w-4xl mx-auto">
                    <div class="text-center text-gray-500 py-20">
                        <div class="text-6xl mb-4">💬</div>
                        <h2 class="text-2xl font-medium mb-2">欢迎来到AI圆桌</h2>
                        <p class="text-gray-400">点击"新建AI圆桌"开始您的成长对话</p>
                    </div>
                </div>
            </div>

            <!-- 输入区域 -->
            <div class="bg-white border-t border-gray-200 p-4" id="inputArea">
                <div class="max-w-4xl mx-auto">
                    <div class="flex space-x-4 mb-3">
                        <input type="text" id="messageInput" placeholder="输入你的想法..." 
                               class="flex-1 px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-warm-blue/20">
                        <button id="sendBtn" class="bg-warm-blue text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors">
                            发送
                        </button>
                    </div>
                    
                    <!-- 复盘按钮区域 -->
                    <div class="flex justify-center">
                        <div class="inline-flex rounded-md shadow-sm" role="group">
                            <button id="quickReflectBtn" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-l-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10">
                                ⚡ 闪电复盘
                            </button>
                            <button id="deepReflectBtn" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-r-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10">
                                🧠 深潜复盘
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 新建圆桌模态框 -->
    <div id="newRoundtableModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-96 max-w-90vw">
            <h3 class="text-xl font-medium mb-4">选择AI伙伴</h3>
            <div class="space-y-3 mb-6">
                <label class="flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                    <input type="checkbox" name="aiRole" value="coach" class="text-warm-blue">
                    <div class="flex-1">
                        <div class="font-medium">💡 Coach 小柯</div>
                        <div class="text-sm text-gray-500">成长引导者 - 温和提问式</div>
                    </div>
                </label>
                <label class="flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                    <input type="checkbox" name="aiRole" value="strategist" class="text-warm-blue">
                    <div class="flex-1">
                        <div class="font-medium">🧠 Strategist 老谋</div>
                        <div class="text-sm text-gray-500">战略顾问 - 理性框架清晰</div>
                    </div>
                </label>
                <label class="flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                    <input type="checkbox" name="aiRole" value="psychologist" class="text-warm-blue">
                    <div class="flex-1">
                        <div class="font-medium">💖 Psychologist 心理姐</div>
                        <div class="text-sm text-gray-500">情绪伙伴 - 共情细腻</div>
                    </div>
                </label>
                <label class="flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                    <input type="checkbox" name="aiRole" value="operator" class="text-warm-blue">
                    <div class="flex-1">
                        <div class="font-medium">⚡ Operator 阿操</div>
                        <div class="text-sm text-gray-500">落地专家 - 直接高效</div>
                    </div>
                </label>
            </div>
            <div class="flex space-x-3">
                <button id="cancelRoundtable" class="flex-1 py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-50">
                    取消
                </button>
                <button id="createRoundtable" class="flex-1 py-2 px-4 bg-warm-blue text-white rounded-lg hover:bg-blue-600">
                    创建圆桌
                </button>
            </div>
        </div>
    </div>

    <!-- 配置中心模态框 -->
    <div id="configModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-[500px] max-w-90vw max-h-[80vh] overflow-y-auto">
            <h3 class="text-xl font-medium mb-4">配置中心</h3>
            
            <!-- AI平台选择 -->
            <div class="mb-6">
                <label class="block text-sm font-medium mb-2">AI平台</label>
                <select id="aiProvider" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    <option value="dashscope">阿里云百炼</option>
                    <option value="openrouter">OpenRouter</option>
                </select>
            </div>

            <!-- API Key配置 -->
            <div class="mb-6">
                <label class="block text-sm font-medium mb-2">API Key</label>
                <input type="password" id="apiKey" placeholder="输入您的API Key" 
                       class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                <div class="text-xs text-gray-500 mt-1">🔒 仅本地存储，不会上传到服务器</div>
            </div>

            <!-- 模型选择 -->
            <div class="mb-6">
                <label class="block text-sm font-medium mb-2">文本模型</label>
                <select id="textModel" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    <option value="qwen-plus">qwen-plus</option>
                    <option value="qwen-max">qwen-max</option>
                    <option value="qwen-turbo">qwen-turbo</option>
                </select>
            </div>

            <!-- Google CSE配置 -->
            <div class="mb-6">
                <label class="block text-sm font-medium mb-2">Google CSE ID (可选)</label>
                <input type="text" id="googleCseId" placeholder="用于搜索功能" 
                       class="w-full px-3 py-2 border border-gray-300 rounded-lg">
            </div>

            <!-- 其他设置 -->
            <div class="mb-6">
                <label class="flex items-center space-x-2">
                    <input type="checkbox" id="enableAnimations" checked class="text-warm-blue">
                    <span class="text-sm">启用动画效果</span>
                </label>
            </div>

            <div class="flex space-x-3">
                <button id="cancelConfig" class="flex-1 py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-50">
                    取消
                </button>
                <button id="saveConfig" class="flex-1 py-2 px-4 bg-warm-blue text-white rounded-lg hover:bg-blue-600">
                    保存配置
                </button>
            </div>
        </div>
    </div>

    <!-- 复盘卡片模态框 -->
    <div id="reflectModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-[600px] max-w-90vw">
            <h3 class="text-xl font-medium mb-4" id="reflectModalTitle">创建复盘卡片</h3>
            
            <!-- 闪电复盘内容 -->
            <div id="quickReflectContent">
                <p class="text-gray-600 mb-4">AI将根据当前对话自动生成复盘卡片</p>
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">选择标签</label>
                    <div class="flex flex-wrap gap-2">
                        <label class="inline-flex items-center px-3 py-1 rounded-full cursor-pointer macaron-tag pink">
                            <input type="checkbox" name="reflectTag" value="沟通" class="mr-2">
                            #沟通
                        </label>
                        <label class="inline-flex items-center px-3 py-1 rounded-full cursor-pointer macaron-tag purple">
                            <input type="checkbox" name="reflectTag" value="情绪" class="mr-2">
                            #情绪
                        </label>
                        <label class="inline-flex items-center px-3 py-1 rounded-full cursor-pointer macaron-tag green">
                            <input type="checkbox" name="reflectTag" value="决策" class="mr-2">
                            #决策
                        </label>
                        <label class="inline-flex items-center px-3 py-1 rounded-full cursor-pointer macaron-tag blue">
                            <input type="checkbox" name="reflectTag" value="职场" class="mr-2">
                            #职场
                        </label>
                        <label class="inline-flex items-center px-3 py-1 rounded-full cursor-pointer macaron-tag orange">
                            <input type="checkbox" name="reflectTag" value="成长" class="mr-2">
                            #成长
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- 深潜复盘内容 -->
            <div id="deepReflectContent" style="display: none;">
                <p class="text-gray-600 mb-4">AI将引导您进行深度复盘，帮助您获得更深刻的洞察</p>
                
                <!-- 单个问题容器 -->
                <div id="deepReflectQuestion" class="reflect-question">
                    <p class="reflect-question-text">AI正在准备引导问题...</p>
                    <textarea id="deepReflectAnswer" class="reflect-answer-input" rows="3" placeholder="在这里回答..."></textarea>
                </div>
                
                <!-- 导航按钮 -->
                <div class="reflect-nav-buttons">
                    <button id="prevQuestion" class="reflect-nav-button prev" disabled>上一题</button>
                    <div id="questionProgress" class="text-sm text-gray-500">问题 1/3</div>
                    <button id="nextQuestion" class="reflect-nav-button next">下一题</button>
                </div>
            </div>
            
            <!-- 复盘结果 -->
            <div id="reflectResult" class="macaron-card blue mb-4" style="display: none;">
                <div class="reflection-card-content">
                    <!-- 复盘结果将在这里显示 -->
                </div>
            </div>
            
            <div class="flex space-x-3">
                <button id="cancelReflect" class="flex-1 py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-50">
                    取消
                </button>
                <button id="createReflectCard" class="flex-1 py-2 px-4 bg-morning-orange text-white rounded-lg hover:bg-orange-500">
                    生成复盘卡片
                </button>
            </div>
        </div>
    </div>

    <!-- 成长日志模态框 -->
    <div id="growthLogModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-[800px] max-w-90vw max-h-[80vh] overflow-y-auto growth-log-macaron">
            <h3 class="text-xl font-medium mb-6 text-center">📓 我的成长日志</h3>
            
            <!-- 导航标签 -->
            <div class="flex justify-center mb-6">
                <div class="inline-flex bg-gray-100 p-1 rounded-full">
                    <button class="growth-tab-macaron active px-4 py-2 rounded-full" data-target="growthTree">🌱 成长树</button>
                    <button class="growth-tab-macaron px-4 py-2 rounded-full" data-target="cardArchive">📌 卡片档案</button>
                    <button class="growth-tab-macaron px-4 py-2 rounded-full" data-target="growthDashboard">📊 成长仪表盘</button>
                    <button class="growth-tab-macaron px-4 py-2 rounded-full" data-target="monthlyReport">📄 月度报告</button>
                </div>
            </div>
            
            <!-- 成长树区域 -->
            <div id="growthTreeTab" class="growth-content">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="growth-tree-container">
                        <div class="text-center">
                            <div id="growthTree" class="text-8xl mb-4 growth-tree-animate">🌱</div>
                            <div class="text-lg font-medium text-gray-700">成长树 Level 1</div>
                            <div class="text-sm text-gray-600 mb-4">幼苗期</div>
                            
                            <!-- 季节指示器 -->
                            <div class="flex justify-center items-center mb-4">
                                <span class="px-3 py-1 bg-white bg-opacity-50 rounded-full text-sm">
                                    <span id="currentSeason" class="mr-2">🌱</span>
                                    <span id="seasonName">春天</span>
                                </span>
                            </div>
                            
                            <!-- 图片生成按钮 -->
                            <div class="mt-3 mb-4">
                                <button id="generateTreeImageBtn" class="generate-image-btn flex items-center mx-auto">
                                    <span class="icon">🖼️</span>
                                    <span>生成树木图片</span>
                                </button>
                                <div id="imageGenerationStatus" class="text-xs text-gray-500 mt-2 text-center hidden">
                                    <span class="loading-dots">图片生成中</span>
                                </div>
                            </div>
                            
                            <!-- 树木类型选择 -->
                            <div class="mt-4">
                                <label class="block text-sm font-medium mb-3 text-gray-700">选择你的成长树类型</label>
                                <div class="flex justify-center space-x-6">
                                    <label class="cursor-pointer">
                                        <input type="radio" name="treeType" value="oak" class="hidden" checked>
                                        <div class="text-3xl p-3 rounded-full bg-white shadow-md hover:shadow-lg transition-all">🌳</div>
                                        <div class="text-xs mt-2 text-gray-700">橡树</div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="treeType" value="cherry" class="hidden">
                                        <div class="text-3xl p-3 rounded-full bg-white shadow-md hover:shadow-lg transition-all">🌸</div>
                                        <div class="text-xs mt-2 text-gray-700">樱花</div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="treeType" value="bamboo" class="hidden">
                                        <div class="text-3xl p-3 rounded-full bg-white shadow-md hover:shadow-lg transition-all">🎋</div>
                                        <div class="text-xs mt-2 text-gray-700">竹子</div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-medium mb-4 text-gray-700">我的成长统计</h4>
                        <div class="growth-stats-container mb-5">
                            <div class="growth-stat-card">
                                <div class="growth-stat-value text-blue-500">0</div>
                                <div class="growth-stat-label">对话次数</div>
                            </div>
                            <div class="growth-stat-card">
                                <div class="growth-stat-value text-orange-500">0</div>
                                <div class="growth-stat-label">复盘卡片</div>
                            </div>
                            <div class="growth-stat-card">
                                <div class="growth-stat-value text-green-500">0</div>
                                <div class="growth-stat-label">行动完成</div>
                            </div>
                            <div class="growth-stat-card">
                                <div class="growth-stat-value text-purple-500">0</div>
                                <div class="growth-stat-label">花朵数量</div>
                            </div>
                        </div>
                        
                        <div class="macaron-card purple">
                            <h5 class="macaron-title">我的成就</h5>
                            <div id="achievements" class="text-center text-gray-500 py-2">
                                暂无成就，继续努力！
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 卡片档案区域 -->
            <div id="cardArchiveTab" class="growth-content hidden">
                <div class="mb-5 flex justify-between items-center">
                    <h4 class="font-medium text-gray-700">我的复盘卡片档案馆</h4>
                    <div class="flex space-x-2">
                        <select id="cardTimeFilter" class="text-sm border border-gray-200 rounded-full px-3 py-1 bg-white shadow-sm">
                            <option value="all">全部时间</option>
                            <option value="day">今天</option>
                            <option value="week">本周</option>
                            <option value="month">本月</option>
                        </select>
                        <select id="cardTagFilter" class="text-sm border border-gray-200 rounded-full px-3 py-1 bg-white shadow-sm">
                            <option value="all">全部标签</option>
                            <option value="沟通">#沟通</option>
                            <option value="情绪">#情绪</option>
                            <option value="决策">#决策</option>
                            <option value="职场">#职场</option>
                            <option value="成长">#成长</option>
                        </select>
                    </div>
                </div>
                
                <div id="cardArchive" class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    <div class="text-center text-gray-500 py-10 col-span-2 bg-white rounded-lg shadow-sm">
                        <div class="text-4xl mb-3">📌</div>
                        <div class="text-lg mb-1">暂无复盘卡片</div>
                        <div class="text-sm text-gray-400">开始对话并进行复盘，卡片将自动保存在这里</div>
                    </div>
                </div>
            </div>
            
            <!-- 成长仪表盘区域 -->
            <div id="growthDashboardTab" class="growth-content hidden">
                <div class="mb-6">
                    <h4 class="font-medium mb-3 text-gray-700">💫 能力雷达图</h4>
                    <div class="macaron-card blue relative">
                        <div class="flex items-center justify-between mb-4">
                            <div class="text-sm text-gray-600">五个核心软技能维度分析</div>
                            <div class="relative">
                                <button id="refreshRadarBtn" class="text-blue-500 hover:text-blue-700 text-sm px-3 py-1 border border-blue-300 rounded-full hover:bg-blue-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent">
                                    🔄 重新分析
                                </button>
                                <div id="refreshTooltip" class="absolute bottom-full right-0 mb-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-lg opacity-0 pointer-events-none transition-opacity duration-200 whitespace-nowrap z-10">
                                    <div class="absolute top-full right-3 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800"></div>
                                    <span id="tooltipText">提示信息</span>
                                </div>
                            </div>
                        </div>
                        <div class="h-80 flex items-center justify-center">
                            <canvas id="competencyRadarChart" class="radar-chart-canvas" width="300" height="300"></canvas>
                        </div>
                        <div id="radarPlaceholder" class="text-center hidden">
                            <div class="text-4xl mb-3">📊</div>
                            <div class="text-lg mb-1">数据收集中</div>
                            <div class="text-sm text-gray-500">请先进行对话和复盘，系统将分析您的能力发展</div>
                        </div>
                    </div>
                </div>
                
                <!-- 能力详情展示区域 -->
                <div id="competencyDetailSection" class="mb-6 hidden">
                    <div class="macaron-card purple">
                        <div class="flex items-center justify-between mb-4">
                            <h5 id="competencyDetailTitle" class="font-semibold text-lg">能力详情</h5>
                            <button id="closeDetailBtn" class="text-gray-400 hover:text-gray-600 text-xl">&times;</button>
                        </div>
                        <div id="competencyDetailContent" class="space-y-4">
                            <!-- 动态内容将在这里填充 -->
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-medium mb-3 text-gray-700">高频挑战</h4>
                        <div class="macaron-card pink">
                            <div id="challengesList" class="text-center text-gray-600 py-4">
                                <div class="text-3xl mb-2">🎯</div>
                                <div>暂无数据，继续对话和复盘</div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-medium mb-3 text-gray-700">情绪模式</h4>
                        <div class="macaron-card purple">
                            <div id="emotionPatterns" class="text-center text-gray-600 py-4">
                                <div class="text-3xl mb-2">💭</div>
                                <div>暂无数据，继续对话和复盘</div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-medium mb-3 text-gray-700">进步对比</h4>
                        <div class="macaron-card green">
                            <div id="progressComparison" class="text-center text-gray-600 py-4">
                                <div class="text-3xl mb-2">📈</div>
                                <div>暂无数据，继续对话和复盘</div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-medium mb-3 text-gray-700">行动力</h4>
                        <div class="macaron-card orange">
                            <div id="actionPower" class="text-center text-gray-600 py-4">
                                <div class="text-3xl mb-2">⚡</div>
                                <div>暂无数据，继续对话和复盘</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 月度报告区域 -->
            <div id="monthlyReportTab" class="growth-content hidden">
                <!-- 报告头部控制区 -->
                <div class="mb-6 flex justify-between items-center">
                    <h4 class="font-medium text-xl">📄 月度成长报告</h4>
                    <div class="flex items-center space-x-3">
                        <select id="monthSelector" class="text-sm border border-gray-300 rounded-md px-3 py-2">
                        <option value="current">本月</option>
                        <option value="last">上月</option>
                    </select>
                        <button id="generateReportBtn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm">
                            🔄 生成报告
                        </button>
                    </div>
                </div>
                
                <!-- 月度报告主内容区 -->
                <div id="monthlyReportContent" class="space-y-6">
                    <!-- 默认状态 -->
                    <div id="reportEmptyState" class="bg-white border border-gray-200 rounded-lg p-8">
                        <div class="text-center text-gray-500">
                            <div class="text-4xl mb-3">📅</div>
                            <div class="text-lg mb-2">准备生成您的成长月报</div>
                            <div class="text-sm">点击上方的"生成报告"按钮开始</div>
                        </div>
                    </div>
                    
                    <!-- 报告内容区域 -->
                    <div id="reportContentArea" class="hidden">
                        <!-- ① 本月高光数据 -->
                        <div class="macaron-card blue">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <span class="text-2xl mr-2">✨</span>
                                本月高光数据
                            </h3>
                            <div id="topLineStats" class="space-y-4">
                                <!-- 动态内容将在这里填充 -->
                            </div>
                        </div>
                        
                        <!-- ② 成长树快照 -->
                        <div class="macaron-card green">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <span class="text-2xl mr-2">🌱</span>
                                成长树快照
                            </h3>
                            <div id="growthTreeSnapshot" class="space-y-4">
                                <!-- 动态内容将在这里填充 -->
                            </div>
                        </div>
                        
                        <!-- ③ 认知突破时刻 -->
                        <div class="macaron-card purple">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <span class="text-2xl mr-2">💡</span>
                                认知突破时刻
                            </h3>
                            <div id="cognitiveBreakthroughs" class="space-y-4">
                                <!-- 动态内容将在这里填充 -->
                            </div>
                        </div>
                        
                        <!-- ④ AI伙伴寄语 -->
                        <div class="macaron-card orange">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <span class="text-2xl mr-2">🤖</span>
                                AI伙伴寄语
                            </h3>
                            <div id="aiPartnerMessages" class="space-y-4">
                                <!-- 动态内容将在这里填充 -->
                            </div>
                        </div>
                        
                        <!-- ⑤ 成就与徽章 -->
                        <div class="macaron-card pink">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <span class="text-2xl mr-2">🏆</span>
                                成就与徽章
                            </h3>
                            <div id="achievementsAndBadges" class="space-y-4">
                                <!-- 动态内容将在这里填充 -->
                            </div>
                        </div>
                        
                        <!-- 设定下月焦点 -->
                        <div class="macaron-card yellow">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <span class="text-2xl mr-2">🎯</span>
                                设定下月焦点
                            </h3>
                            <div id="nextMonthFocus" class="space-y-4">
                                <p class="text-gray-600 text-sm mb-3">根据本月洞察，选择1-2个下月希望关注的成长领域：</p>
                                <div class="grid grid-cols-2 gap-3">
                                    <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" name="nextFocus" value="表达力" class="mr-2 text-blue-500">
                                        <span class="text-sm">提升表达力</span>
                                    </label>
                                    <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" name="nextFocus" value="决策效率" class="mr-2 text-blue-500">
                                        <span class="text-sm">提升决策效率</span>
                                    </label>
                                    <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" name="nextFocus" value="情绪管理" class="mr-2 text-blue-500">
                                        <span class="text-sm">加强情绪管理</span>
                                    </label>
                                    <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" name="nextFocus" value="执行力" class="mr-2 text-blue-500">
                                        <span class="text-sm">提升执行力</span>
                                    </label>
                                    <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" name="nextFocus" value="边界感" class="mr-2 text-blue-500">
                                        <span class="text-sm">建立清晰边界</span>
                                    </label>
                                    <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" name="nextFocus" value="向上管理" class="mr-2 text-blue-500">
                                        <span class="text-sm">优化向上管理</span>
                                    </label>
                                </div>
                                <button id="saveNextFocusBtn" class="mt-3 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm">
                                    保存下月焦点
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 报告操作区 -->
                <div id="reportActions" class="mt-6 flex justify-between items-center hidden">
                    <div class="flex space-x-3">
                        <button id="shareReportBtn" class="px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-lg hover:from-green-600 hover:to-blue-600 flex items-center text-sm font-medium shadow-lg transform hover:scale-105 transition-all duration-200">
                            <span class="mr-2">📤</span>
                            生成分享长图
                        </button>
                    </div>
                    <div class="text-xs text-gray-500">
                        报告生成于 <span id="reportGeneratedTime"></span>
                    </div>
                </div>
            </div>

            <div class="flex justify-end mt-6">
                <button id="closeGrowthLog" class="py-2 px-4 bg-warm-blue text-white rounded-lg hover:bg-blue-600">
                    关闭
                </button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>