<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdownè§£ææµ‹è¯• - å¤ç›˜å¡ç‰‡</title>
    <link rel="stylesheet" href="tailwind.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
            font-family: 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .test-title {
            color: white;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        .before-after {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        @media (min-width: 768px) {
            .before-after {
                grid-template-columns: 1fr 1fr;
            }
        }
        .section-title {
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            text-align: center;
        }
        .raw-content {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
            overflow-wrap: break-word;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="test-title">ğŸ“ Markdownè§£ææµ‹è¯•</h1>
        
        <div class="before-after">
            <div>
                <h3 class="section-title">åŸå§‹Markdownå†…å®¹</h3>
                <div class="raw-content" id="rawContent">
**æ·±åº¦å¤ç›˜å¡ç‰‡ï¼šåœ¨å¿™ç¢Œä¸­æ‰¾å›èŠ‚å¥ï¼Œæ¸©æŸ”å¯¹å¾…è‡ªå·±**

---

### ğŸŒ± æ·±åº¦æ´å¯Ÿ
ä½ æ­£åœ¨ç»å†ä¸€ç§"åŠªåŠ›å´æ— æ³•æŒæ§"çš„ç–²æƒ«æ„Ÿï¼Œè¿™èƒŒåå¯èƒ½æ˜¯å¯¹è‡ªæˆ‘è¦æ±‚çš„é«˜æœŸå¾…ä¸ç°å®æ—¶é—´ã€ç²¾åŠ›ä¸åŒ¹é…ä¹‹é—´çš„å†²çªã€‚ä½ ä¸æ˜¯ä¸å¤Ÿå¥½ï¼Œè€Œæ˜¯å¤ªæƒ³åšå¥½ï¼Œå´å¿½ç•¥äº†ç…§é¡¾è‡ªå·±çš„èŠ‚å¥ã€‚

---

### ğŸ§  æ€ç»´æ¨¡å¼åˆ†æ
ä½ åœ¨é¢å¯¹å·¥ä½œå‹åŠ›æ—¶ï¼Œå€¾å‘äºé€šè¿‡"åŠ å€åŠªåŠ›"æ¥åº”å¯¹ï¼Œä½†å½“ç»“æœä¸å¦‚é¢„æœŸæ—¶ï¼Œå®¹æ˜“é™·å…¥è‡ªæˆ‘æ€€ç–‘æˆ–æ— åŠ›æ„Ÿã€‚è¿™ç§"åšäº‹ä¼˜å…ˆã€æƒ…ç»ªå…¶æ¬¡"çš„æ¨¡å¼è™½ç„¶ä½“ç°äº†ä½ çš„**è´£ä»»æ„Ÿ**ï¼Œä½†ä¹Ÿå¯èƒ½è®©ä½ å¿½ç•¥äº†è‡ªæˆ‘è°ƒèŠ‚å’Œæƒ…ç»ªé‡Šæ”¾çš„é‡è¦æ€§ã€‚

---

### ğŸŒ¸ æˆé•¿æ–¹å‘
1. **å­¦ä¼šåœ¨åŠªåŠ›ä¹‹å¤–ï¼Œå€¾å¬è‡ªå·±çš„èº«å¿ƒèŠ‚å¥**ï¼Œæ‰¾åˆ°æ•ˆç‡ä¸ä¼‘æ¯çš„å¹³è¡¡ç‚¹ã€‚
2. **å»ºç«‹æ›´çµæ´»çš„è‡ªæˆ‘è¯„ä»·æ ‡å‡†**ï¼Œå…è®¸è‡ªå·±"åšå¾—åˆšå¥½"ï¼Œè€Œä¸æ˜¯"å¿…é¡»å®Œç¾"ã€‚

---

### ğŸŒ¼ è¡ŒåŠ¨è®¡åˆ’
1. **æ¯å¤©è®¾å®šä¸€ä¸ª"å·¥ä½œå°ç›®æ ‡"**ï¼Œå®Œæˆåç»™è‡ªå·±ä¸€ä¸ªå°å°çš„å¥–åŠ±ï¼ˆæ¯”å¦‚ä¸€æ¯å–œæ¬¢çš„èŒ¶ã€å‡ åˆ†é’Ÿå†¥æƒ³ï¼‰ï¼Œå¸®åŠ©å¤§è„‘å»ºç«‹æ­£å‘åé¦ˆã€‚
2. **æ¯å¤©ç¡å‰å†™ä¸‹3ä»¶ä»Šå¤©åšå¾—ä¸é”™çš„å°äº‹**ï¼Œå“ªæ€•åªæ˜¯"åšæŒå®Œæˆäº†ä¸€é¡µæŠ¥å‘Š"ï¼Œä¹Ÿèƒ½æ…¢æ…¢å»ºç«‹è‡ªæˆ‘è‚¯å®šçš„åŠ›é‡ã€‚

---

ä½ å·²ç»èµ°åœ¨è§‰å¯Ÿä¸æˆé•¿çš„è·¯ä¸Šï¼Œè¿™ä»½æ¸©æŸ”çš„åšæŒï¼Œæœ¬èº«å°±æ˜¯ä¸€ç§äº†ä¸èµ·çš„åŠ›é‡ã€‚ç»§ç»­åŠ æ²¹ï¼Œæˆ‘ä¼šä¸€ç›´åœ¨è¿™é‡Œé™ªç€ä½  ğŸŒ¿
                </div>
            </div>
            
            <div>
                <h3 class="section-title">è§£æåçš„æ•ˆæœ</h3>
                <div class="macaron-card blue">
                    <div class="macaron-title">å¤ç›˜å¡ç‰‡è§£ææ•ˆæœ</div>
                    <div class="reflection-card-content">
                        <div class="reflection-content" id="parsedContent">
                            <!-- è§£æåçš„å†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- åŠŸèƒ½è¯´æ˜ -->
        <div class="bg-white bg-opacity-20 backdrop-blur-sm rounded-2xl p-6">
            <h3 class="text-white text-xl font-semibold mb-4">ğŸ”§ Markdownè§£æåŠŸèƒ½</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-white text-sm">
                <div>
                    <h4 class="font-semibold mb-2">âœ… æ”¯æŒçš„è¯­æ³•</h4>
                    <ul class="space-y-1 opacity-90">
                        <li>â€¢ **ç²—ä½“æ–‡æœ¬** â†’ <strong>ç²—ä½“æ–‡æœ¬</strong></li>
                        <li>â€¢ ### æ ‡é¢˜ â†’ æ ¼å¼åŒ–æ ‡é¢˜</li>
                        <li>â€¢ --- â†’ åˆ†éš”çº¿</li>
                        <li>â€¢ ğŸŒ± è¡¨æƒ…ç¬¦å·æ®µè½ â†’ ç‰¹æ®Šæ ·å¼</li>
                        <li>â€¢ 1. æœ‰åºåˆ—è¡¨ â†’ æ ¼å¼åŒ–åˆ—è¡¨</li>
                        <li>â€¢ - æ— åºåˆ—è¡¨ â†’ æ ¼å¼åŒ–åˆ—è¡¨</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-2">ğŸ¨ å¢å¼ºåŠŸèƒ½</h4>
                    <ul class="space-y-1 opacity-90">
                        <li>â€¢ è‡ªåŠ¨è¯†åˆ«è¡ŒåŠ¨è®¡åˆ’å¹¶é«˜äº®</li>
                        <li>â€¢ æ´å¯Ÿå†…å®¹ç‰¹æ®Šæ ·å¼</li>
                        <li>â€¢ è¡¨æƒ…ç¬¦å·æ®µè½ç¾åŒ–</li>
                        <li>â€¢ æ™ºèƒ½æ®µè½åˆ†å‰²</li>
                        <li>â€¢ ä¿æŒåŸæœ‰è§†è§‰å±‚æ¬¡</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ä»app.jså¤åˆ¶Markdownè§£æå™¨
        class MarkdownParser {
            static parseMarkdown(text) {
                if (!text) return '';
                
                let html = text
                    // å¤„ç†åˆ†éš”çº¿
                    .replace(/^---+$/gm, '<hr class="my-4 border-gray-300 border-opacity-50">')
                    
                    // å¤„ç†æ ‡é¢˜ï¼ˆ###, ##, #ï¼‰
                    .replace(/^### (.*$)/gm, '<h3 class="text-lg font-semibold text-gray-800 mt-4 mb-2">$1</h3>')
                    .replace(/^## (.*$)/gm, '<h2 class="text-xl font-semibold text-gray-800 mt-5 mb-3">$1</h2>')
                    .replace(/^# (.*$)/gm, '<h1 class="text-2xl font-bold text-gray-800 mt-6 mb-4">$1</h1>')
                    
                    // å¤„ç†ç²—ä½“
                    .replace(/\*\*(.*?)\*\*/g, '<strong class="font-semibold text-gray-800">$1</strong>')
                    
                    // å¤„ç†æ–œä½“
                    .replace(/\*(.*?)\*/g, '<em class="italic text-gray-700">$1</em>')
                    
                    // å¤„ç†è¡¨æƒ…ç¬¦å·å¼€å¤´çš„æ®µè½ï¼ˆç‰¹æ®Šæ ¼å¼ï¼‰
                    .replace(/^(ğŸŒ±|ğŸ§ |ğŸŒ¸|ğŸŒ¼|ğŸ’¡|âš¡|ğŸ¯|ğŸ’­|âœ¨|ğŸ”|ğŸ“|ğŸ’ª|ğŸŒŸ|ğŸª|ğŸ¨|ğŸ“Š|ğŸ†)\s+(.*$)/gm, '<div class="flex items-start mb-3"><span class="text-lg mr-2 mt-1">$1</span><div class="flex-1">$2</div></div>')
                    
                    // å¤„ç†æœ‰åºåˆ—è¡¨
                    .replace(/^\d+\.\s+(.*$)/gm, '<li class="mb-2 ml-4">$1</li>')
                    
                    // å¤„ç†æ— åºåˆ—è¡¨
                    .replace(/^[-\*]\s+(.*$)/gm, '<li class="mb-2 ml-4 relative"><span class="absolute -left-4 text-blue-500">â€¢</span>$1</li>')
                    
                    // å¤„ç†è¡Œå†…ä»£ç 
                    .replace(/`([^`]+)`/g, '<code class="bg-gray-100 px-2 py-1 rounded text-sm font-mono">$1</code>')
                    
                    // å¤„ç†æ¢è¡Œ
                    .replace(/\n\n/g, '</p><p class="mb-3">')
                    .replace(/\n/g, '<br>');
                
                // åŒ…è£…åˆ—è¡¨é¡¹
                html = html.replace(/(<li.*?<\/li>)/gs, function(match, listItems) {
                    if (listItems.includes('ml-4')) {
                        return `<ul class="list-none mb-4">${listItems}</ul>`;
                    }
                    return match;
                });
                
                // åŒ…è£…æ®µè½
                if (!html.includes('<h1>') && !html.includes('<h2>') && !html.includes('<h3>') && !html.includes('<div class="flex')) {
                    html = '<p class="mb-3">' + html + '</p>';
                } else {
                    // å¯¹äºåŒ…å«æ ‡é¢˜çš„å†…å®¹ï¼Œåªåœ¨éæ ‡é¢˜æ®µè½åŠ pæ ‡ç­¾
                    html = html.replace(/^(?!<[h123]|<div|<ul|<hr|<li)(.+)$/gm, '<p class="mb-3">$1</p>');
                }
                
                return html;
            }
            
            static enhanceReflectionContent(text) {
                // ä¸“é—¨ä¸ºå¤ç›˜å†…å®¹ä¼˜åŒ–çš„è§£æ
                let html = this.parseMarkdown(text);
                
                // å¢å¼ºæ ·å¼å¤„ç†
                html = html
                    // ä¸ºè¡ŒåŠ¨è®¡åˆ’æ·»åŠ ç‰¹æ®Šæ ·å¼
                    .replace(/<li([^>]*?)>(.*?(?:è¡ŒåŠ¨|å»ºè®®|è®¡åˆ’|ç›®æ ‡|æ­¥éª¤).*?)<\/li>/gi, 
                        '<li$1><div class="action-item">$2</div></li>')
                    
                    // ä¸ºæ´å¯Ÿå†…å®¹æ·»åŠ é«˜äº®
                    .replace(/<p([^>]*?)>(.*?(?:æ´å¯Ÿ|é¢†æ‚Ÿ|å‘ç°|æ„è¯†åˆ°).*?)<\/p>/gi, 
                        '<div class="highlight">$2</div>')
                    
                    // ç¾åŒ–è¡¨æƒ…ç¬¦å·æ®µè½
                    .replace(/<div class="flex items-start mb-3"><span class="text-lg mr-2 mt-1">(ğŸŒ±|ğŸ§ |ğŸŒ¸|ğŸŒ¼)<\/span><div class="flex-1">(.*?)<\/div><\/div>/g,
                        '<div class="flex items-start mb-4 p-3 bg-white bg-opacity-40 rounded-lg"><span class="text-2xl mr-3">$1</span><div class="flex-1 font-medium">$2</div></div>');
                
                return html;
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåè§£æå†…å®¹
        document.addEventListener('DOMContentLoaded', function() {
            const rawContent = document.getElementById('rawContent').textContent;
            const parsedContent = MarkdownParser.enhanceReflectionContent(rawContent);
            document.getElementById('parsedContent').innerHTML = parsedContent;
        });
    </script>
</body>
</html>